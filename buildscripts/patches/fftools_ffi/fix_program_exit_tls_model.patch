diff --git a/cmdutils.c b/cmdutils.c
--- a/cmdutils.c
+++ b/cmdutils.c
@@ -82,7 +82,9 @@ void init_dynload(void)
 #endif
 }
 
-static __thread void (*program_exit)(int ret);
+/* Use a shared-library-safe TLS model when linked into libmpv.so. */
+static __thread void (*program_exit)(int ret)
+    __attribute__((tls_model("global-dynamic")));
 
 void register_exit(void (*cb)(int ret))
 {
